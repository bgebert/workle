<html>
    <head>
        <link rel="shortcut icon" type="image/png" href="./images/HR_favicon_512px.png" />
        <title>WORKLE</title>
        
        <meta charset="utf-8">
        <meta_remove name="description" content="">
        <meta_remove name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        
        <!-- Latest compiled and minified CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
        <link rel="stylesheet" href="https://use.typekit.net/tfw4naf.css">

        <!-- Latest compiled and minified JavaScript -->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
        <script src='scripts/words.js'></script>
        
        <!--
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        -->

        <style>
            /* -- general styles */
            body{
                omin-width: 850px;
                min-height: 700px;
                max-height: 700px;
                remove_background-image: url(https://shrm-res.cloudinary.com/image/upload/v1646875965/cs-sandbox/Icons_R1_BG_copy.svg);
                background-image: url(https://shrm-res.cloudinary.com/image/upload/cs-sandbox/Icons_R1_BG_copy.svg);
                background-size: cover;
                font-family: 'proxima-soft', Arial, Helvetica, sans-serif;
                font-size:1.5rem;
            }
            fieldset{
                width: 100%;
            }
            .hidden {
                display: none;
            }
            .img-pinwheel {
                vertical-align: inherit;
                width: 2rem;
            }
            .img-responsive {
                width: 85px;
                padding-bottom: 3px;
            }

            /* -- tabs */
            .disabled_tab{
                pointer-events: none;
                color: gray; 
            }

            /* -- navbar */
            .navbar {
                obackground-color: #FFFFFF;
                z-index: 1;
                margin-bottom: 10px;
            }
            .left-links{
               remove_flex:1 1 200px;
            }
            .navbar a {
                remove_float: left;
                display: inline-flex;
                color: #000000;
                text-align: center;
                remove_remove_padding: 14px;
                text-decoration: none;
                remove_width: 32%;
                justify-content: center;
                padding-right: 20px;
            }
            .content {
                padding: 16px;
            }
            /* The sticky class is added to the navbar with JS when it reaches its scroll position */
            .sticky {
                position: fixed;
                top: 0;
                width: 100%;
            }
            /* Add some top padding to the page content to prevent sudden quick movement (as the navigation bar gets a new position at the top of the page (position:fixed and top:0) */
            .sticky + .content {
                padding-top: 60px;
            }

            /* -- title_bar */
            .icon_instructions { cursor: pointer; }
            .icon_stats { cursor: pointer; }
            .icon_tasks { cursor: pointer; }
            .title_bar{
                font-weight: bold;
                font-size: 2.5rem;
            }
            .workTxt { 
                remove_background: -webkit-linear-gradient(#233151, #8B1377);  
                background-color: #1A3B67;
                -webkit-background-clip: text;  
                -webkit-text-fill-color: transparent;
            }
            .leTxt {
                color:#0177BE;
            }

            /* -- game container */
            #gamecontainer {
                text-align: center;
                max-width: 100%;
            }
            .letter {
                width:66px;
                min-width:66px;
                max-width:66px;
                height:56px;
                min-height:56px;
                max-height:56px;
                border:1px solid black;
                border-radius:4px;
                display:inline-block;
                margin-bottom:8px;
                text-align:center;
                color:black;
                font-size:2rem;
                padding:5px 0px;
                font-weight:bold;
                margin-left:6px;
                margin-right:6px;
            }
            .upcoming{
                border:1px solid rgb(167, 167, 167);
            }
            .letter_borderless {
                border: none;
                min-width: 20px;
                max-width: 20px;
            }
            .none{
                background-color:black !important;
                color:white !important;
                opacity: 15%;
            }
            .place{
                background-color:#DC6A46 !important;
                color:white !important;
            }
            .correct{
                background-color:#0076be !important;
                color:white !important;
            }
            .tbd{
                background-color:#3D3D3E !important;
                color:white;
            }
            .row{
                position:relative;
                transition:transform .7s;
                display: inherit !important;
            }

            /* -- keyboard */
            #keyboardrow3, #keyboardrow2, #keyboardrow1, #keyboardrow0{
                width:100%;
                text-align:center;
            }
            .keyboard {
                position: absolute;
                bottom: 0px;
                margin: auto;
                width: 100%;
            }
            .key{
                width:65px;
                height:55px;
                border:1px solid black;
                border-radius:4px;
                display:inline-block;
                margin:2px 0px;
                text-align:center;
                remove_color:black;
                remove_font-size:16px;
                padding:1px;
                font-weight:bold;
                cursor: pointer;
                -webkit-touch-callout: none; /* iOS Safari */
                -webkit-user-select: none; /* Safari */
                -khtml-user-select: none; /* Konqueror HTML */
                -moz-user-select: none; /* Old versions of Firefox */
                    -ms-user-select: none; /* Internet Explorer/Edge */
                        user-select: none; /* Non-prefixed version, currently
                                            supported by Chrome, Edge, Opera and Firefox */
            }
            .keylong{
                width:175px;
                height:55px;
                border:1px solid black;
                border-radius:4px;
                display:inline-block;
                margin:2px 0px;
                text-align:center;
                remove_color:black;
                remove_font-size:16px;
                padding:1px;
                font-weight:bold;
                cursor: pointer;
                -webkit-touch-callout: none; /* iOS Safari */
                -webkit-user-select: none; /* Safari */
                -khtml-user-select: none; /* Konqueror HTML */
                -moz-user-select: none; /* Old versions of Firefox */
                    -ms-user-select: none; /* Internet Explorer/Edge */
                        user-select: none; /* Non-prefixed version, currently
                                            supported by Chrome, Edge, Opera and Firefox */
            }
            .keylong, .key {
                color: white;
                background-color: #1A3B67;
                font-size:2rem;
            }
            .key_clue_disabled {
                opacity: 20%;
                cursor: not-allowed;
                display: none;
                background-color: #FFFFFF;
                color: #000000;
            }
            .key_clue_enabled {
                opacity: 100%;
                cursor: pointer;
                display: inline-block;
                background-color: #0177BE;
                color: white;
            }
            .key_pressed {
                background-color: silver;
            }
            .key_clue {
                background-color: #A19F30;
            }

            /* -- hamburger menu */
            .btn-secondary:not(:disabled):not(.disabled).active:focus, .btn-secondary:not(:disabled):not(.disabled):active:focus, .show>.btn-secondary.dropdown-toggle:focus {
                box-shadow: none;
            }
            .btn-secondary.focus, .btn-secondary:focus {
                box-shadow: none;
            }
            #btnGroupDrop1, .btn-group {
                border: 0px;
                background-color: transparent;
                color: #000000;
            }
            .dropdown-item {
                font-size: 1.5rem;
            }

            /* -- modal */
            .region {
                background-color: #FFFFFF;
                border: 1pt solid black;
                margin-left: 2%;
                margin-right: 2%;
                margin-bottom: 2%;
                padding: 10px;
                top: 0px;
                margin-top: 75px;
                position: absolute;
                width: 95%;
            }
            .modal-dialog {
                max-width: 75%;
                margin: 1.75rem auto;
                font-size: 1em;
            }
            .close {
                font-size: 2.5rem;
            }
            .modal-title {
                font-size: 2rem;
            }
            /* -- modal_info */
            .icon{
                height:1.5em;
                width:1.5em !important;
                border:1px solid gray;
                color:white;
                font-weight:bold;
                border-radius:3px;
                justify-content: center;
                align-items: center;
                vertical-align: middle;
                text-align: center;
                display: inline-block;
                width: 20px;
            }

            /* -- modal_stats */
            #numberbar{
                display:flex;
                justify-content: center; 
            }
            .numbertab{
                /* justify-content:center; */
                width:12%;
                border:1px solid black;
                cursor: pointer;
                text-align: center;
            }
            #statsmessage{
                font-size:1em;
                display:flex;
            }
            .guesscontainer{
                width:100%;
                text-align:left;
                display:flex;
                justify-content:flex-start;
                font-size:14px;
                padding:1px 0px;
            }
            .guesscontainer_tries{
                width: 10px;
            }
            .guessbar{
                background-color: #3D3D3E;
                text-align:right;
                padding:0px 5px;
                color:white;
                margin-left:7px;
            }
            .hlguessbar{ background-color:green; }
            .statblock{
                margin-top:10px;
                justify-content: space-around;
                width:20%;
                padding:4px;
            }
            .statnum{
                font-size:25px;
                font-weight:bold;
            }
            .highlight{
                background-color:#0076be;
                color:white;
            }

            /* -- modal_stats_last_played */
            #sharearea{
                width:80%;
                height:220px;
                border: none;
                resize: none;
                line-height: 1;
            }

            /* -- modal_notaword */
            #modal_notaword{ text-align: center; }

            /* -- media styles */
            @media only screen and (max-width: 980px) and (min-device-width: 375px) {
                .btn{
                    font-size: 2rem;
                }
                .navbar {
                    background-color: #ACACAC;
                    z-index: 1;
                    margin-bottom: 10px;
                    border-bottom: 1pt solid black;
                }
                .workTxt, .leTxt {
                    font-size: 4rem;
                }
                .img-pinwheel{
                    width: 3rem;
                }
                .img-responsive{
                    width: 2.1em;
                    padding-bottom: 10px;
                }
                .close{
                    font-size: 3rem;
                }
                .key {
                    width:85px;
                    height:75px;
                    font-size: 3rem;
                    margin: 10px 0px;
                }
                .keylong{
                    width:240px;
                    height:75px;
                    font-size: 3rem;
                    margin: 10px 10px;
                }
                .letter {
                    height: 80px;
                    max-height: inherit;
                    min-height: inherit;
                    font-size: 3rem;
                    width: 65px;
                    padding: none !important;
                }
                .upcoming {
                    border: 1px solid #0177BE;
                }
                .modal-dialog {
                    max-width: 75%;
                    margin: 1.75rem auto;
                    font-size: 1.5em;
                }
                .icon_instructions {
                    font-size: 3rem;
                }
                .icon_stats {
                    font-size: 3rem;
                }
            /*
            @media only screen and (max-width: 600px) {
                .letter {
                    width:56px;
                    height:30px;
                    font-size:26px;
                    margin-left:3px;
                    margin-right:3px;
                }
            }
            @media only screen and (max-width: 500px) {
                .letter {
                    width:50px;
                    height:24px;
                    font-size:22px;
                    padding:10px 0px;
                    margin-left:2px;
                    margin-right:2px;
                }
            }
            @media only screen and (max-width: 420px) {
                .letter {
                    width:10%;
                    height:24px;
                    font-size:22px;
                    padding:10px 0px;
                    margin-left:2px;
                    margin-right:2px;
                }
                #keyboardrow3, #keyboardrow2, #keyboardrow1{
                    display:flex;
                    justify-content:center;
                    max-width: 1100px;
                    min-width: 412px;
                }
                .key{
                    box-sizing: border-box;
                    width:8.8%;
                    margin:2px 0px;
                    height:45px;
                    flex: 1;
                    
                }
                .keylong{
                    width:33%;
                    height:28px;
                }
                
            }
            */
            /*@media (prefers-color-scheme: dark) {
                .key, .keylong{
                    color:white;
                    background-color:black;
                    border:1px solid grey;
                }
                body{
                    background-color:black;
                }
                .letter{
                    color:white;
                    border-color:white;
                }
                .none{
                    background-color:rgb(75, 75, 75);
                }
            }
            */
        </style>
    </head>
    <body>
        <!--[if lt IE 11]>
            <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="#">upgrade your browser</a> to improve your experience.</p>
        <![endif]-->

        <div class="modal" id="modal_info" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">HOW TO PLAY</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div>
                            <ul>
                                <li>Guess the correct word in 6 tries.</li>
                                <li>Each guess is submitted by pressing the 'ENTER' button.</li>
                                <li>The tiles will change color to show how close your guess was to the answer.</li>
                            </ul>
                            <hr>
                            <b>Examples:</b></br>
                            <div style="text-align: left;">
                                <span class="icon correct">R</span>
                                <span class="icon tbd">A</span>
                                <span class="icon tbd">I</span>
                                <span class="icon tbd">S</span>
                                <span class="icon tbd">E</span></br>
                                The letter <b>R</b> is in the answer and in the correct place.
                            </div>
                            </br>
                            <div style="text-align: left;">
                                <span class="icon tbd">V</span>
                                <span class="icon tbd">A</span>
                                <span class="icon place">L</span>
                                <span class="icon tbd">U</span>
                                <span class="icon tbd">E</span></br>
                                The letter <b>L</b> is in the answer but in the wrong place.
                            </div>
                            </br>
                            <div style="text-align: left;">
                                <span class="icon tbd">U</span>
                                <span class="icon tbd">N</span>
                                <span class="icon tbd">I</span>
                                <span class="icon tbd">T</span>
                                <span class="icon none">Y</span></br>
                                The letter <b>Y</b> is in not the answer.
                            </div>
                            <div>
                                <hr></hr>
                                <span>WORKLE is brought to you by Alex and SHRM Research.</span>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer" style="display: none;">
                        <button type="button" class="btn btn-primary">Play Game</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>

        <div class="modal" id="modal_stats" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title">STATISTICS</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs" id="statsTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <a class="nav-link active" id="stats-tab-overall" data-toggle="tab" href="#stats_overall" role="tab" aria-controls="stats_overall" aria-selected="true">Overall</a>
                        </li>
                        <li class="nav-item" role="presentation">
                            <a class="nav-link disabled_tab" id="stats-tab-last-played" data-toggle="" href="#stats_last_played" role="tab" aria-controls="stats_last_played" aria-selected="false">Last Played</a>
                        </li>
                    </ul>
                    <div class="tab-content" id="myTabContent">
                        <div class="tab-pane fade show active" id="stats_overall" role="tabpanel" aria-labelledby="stats-tab-overall">
                            <div id="numberbar">
                                <div class="numbertab" id="s_4">4</div>
                                <div class="numbertab" id="s_5">5</div>
                                <div class="numbertab" id="s_6">6</div>
                                <div class="numbertab" id="s_7">7+</div>
                                <div class="numbertab" id="s_All">All</div>
                            </div>
                            <div id="statsmessage">
                            <div class="statblock"><span id="games" class="statnum"></span><br><span >games<br>played</span></div>
                            <div class="statblock"><span id="wins" class="statnum"></span><br><span >wins</span></div>
                            <div class="statblock"><span id="winpct" class="statnum"></span><br><span >win<br>rate</span></div>
                            <div class="statblock"><span id="streak" class="statnum"></span><br><span >current<br>streak</span></div>
                            <div class="statblock"><span id="beststreak" class="statnum"></span><br><span >best<br>streak</span></div>
                            </div>
                            <br>
                            <div id="guessdisplay">
                                Guess Distribution
                                <div class="guesscontainer"><span class="guesscontainer_tries">1</span><div class="guessbar" id="g_1">0</div></div>
                                <div class="guesscontainer"><span class="guesscontainer_tries">2</span><div class="guessbar" id="g_2">0</div></div>
                                <div class="guesscontainer"><span class="guesscontainer_tries">3</span><div class="guessbar" id="g_3">0</div></div>
                                <div class="guesscontainer"><span class="guesscontainer_tries">4</span><div class="guessbar" id="g_4">0</div></div>
                                <div class="guesscontainer"><span class="guesscontainer_tries">5</span><div class="guessbar" id="g_5">0</div></div>
                                <div class="guesscontainer"><span class="guesscontainer_tries">6</span><div class="guessbar" id="g_6">0</div></div>
                            </div>    
                        </div>
                        <div class="tab-pane fade" id="stats_last_played" role="tabpanel" aria-labelledby="stats-tab-last-played">
                            <div>
                                <div style="display: none;">
                                    <br><span id="resultsstring"></span>
                                </div>
                                <textarea id="sharearea" readonly></textarea>
                                </br>
                                <!--<button id="copy" type="button" class="btn btn-info btn-clipboard" data-clipboard-action="copy" data-clipboard-target="#sharearea">Copy</button>-->
                            </div>
                            <div>
                                <button id="copy" onclick="SHRM.utils.copyResults();" type="button" class="btn btn-info btn-clipboard" data-clipboard-action="copy" data-clipboard-target="#sharearea">Copy</button>
                                <!--<button type="button" onclick="SHRM.utils.share()" class="btn btn-primary" id="share">Share Results</button>-->
                                <button type="button" onclick="SHRM.utils.playAgainButton();" class="btn btn-primary">Play Another</button>
                                <fieldset class="fact">
                                    <hr></hr>
                                    <h5><b>Did You Know?</b></h5>
                                    <span class="fact_percent" style="font-size: 36pt;"></span> <span class="fact_text" ></span>
                                    <span><a class="fact_url">Learn more</a></span>
                                </fieldset>
                            </div>
                        </div>
                    </div>
                    
                </div>
              </div>
            </div>
        </div>

        <div id="modal_notaword" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-body">
                    <br>
                    <p>Not a word.</p>
                </div>
              </div>
            </div>
        </div>

        <div id="modal_clue" class="modal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title"></h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div id="clue_ad">
                        <center><a target="_blank" href="https://www.betterworkplaceschallengecup.com/"><img src="./images/SHRM_ad.png" alt="SHRM Ad"></a>
                            <br>Skip add will dissappear in <span id="countdown">5</span> seconds.</center>
                    </div>
                    <div id="press_your_luck">
                        <center>
                            <span id="begin_clue">Press the ENTER key to select a letter.</span>
                            <span id="end_clue" style="display:none">Here is your clue</span><br>
                            <div class="letter"><span id="random_letter">&nbsp;</span></div>
                        </center>
                        <p id="clue_text" style="display:none"></p>
                    </div>
                </div>
              </div>
            </div>
        </div>

        <div class="maincontainer">
            <div class="navbar">
                <div class="left-links">
                    <a href="#"><i class="fa fa-info-circle icon_instructions" title="Instructions"></i>&nbsp;</a>
                </div>
                <div class="title_bar">
                    <a href="#"><span class="leTxt icon_home">W<img class="img-pinwheel" src="./images/SHRM_Icon.svg" alt="SHRM Pinwheel">RDS</span><span class="workTxt icon_home">W<img class="img-pinwheel" src="./images/SHRM_Icon.svg" alt="SHRM Pinwheel">RK</span></a>
                </div>
                <div class="right-links">
                    <a href="#"><i class="fa fa-chart-bar icon_stats" aria-hidden="true" title="Stats"></i>&nbsp;</a>
                </div>
            </div>
            
            <div id="gamecontainer" class="container"></div>

            <div id="keyboard">
                <div id="keyboardrow3">
                    <div class="key" id="q" onclick="SHRM.utils.onKeyPress(this.id)">Q</div>
                    <div class="key" id="w" onclick="SHRM.utils.onKeyPress(this.id)">W</div>
                    <div class="key" id="e" onclick="SHRM.utils.onKeyPress(this.id)">E</div>
                    <div class="key" id="r" onclick="SHRM.utils.onKeyPress(this.id)">R</div>
                    <div class="key" id="t" onclick="SHRM.utils.onKeyPress(this.id)">T</div>
                    <div class="key" id="y" onclick="SHRM.utils.onKeyPress(this.id)">Y</div>
                    <div class="key" id="u" onclick="SHRM.utils.onKeyPress(this.id)">U</div>
                    <div class="key" id="i" onclick="SHRM.utils.onKeyPress(this.id)">I</div>
                    <div class="key" id="o" onclick="SHRM.utils.onKeyPress(this.id)">O</div>
                    <div class="key" id="p" onclick="SHRM.utils.onKeyPress(this.id)">P</div>
                </div>
                <div id="keyboardrow2">
                    <div class="key" id="a" onclick="SHRM.utils.onKeyPress(this.id)">A</div>
                    <div class="key" id="s" onclick="SHRM.utils.onKeyPress(this.id)">S</div>
                    <div class="key" id="d" onclick="SHRM.utils.onKeyPress(this.id)">D</div>
                    <div class="key" id="f" onclick="SHRM.utils.onKeyPress(this.id)">F</div>
                    <div class="key" id="g" onclick="SHRM.utils.onKeyPress(this.id)">G</div>
                    <div class="key" id="h" onclick="SHRM.utils.onKeyPress(this.id)">H</div>
                    <div class="key" id="j" onclick="SHRM.utils.onKeyPress(this.id)">J</div>
                    <div class="key" id="k" onclick="SHRM.utils.onKeyPress(this.id)">K</div>
                    <div class="key" id="l" onclick="SHRM.utils.onKeyPress(this.id)">L</div>    
                </div>
                <div id="keyboardrow1">
                    <div class="key" id="z" onclick="SHRM.utils.onKeyPress(this.id)">Z</div>
                    <div class="key" id="x" onclick="SHRM.utils.onKeyPress(this.id)">X</div>
                    <div class="key" id="c" onclick="SHRM.utils.onKeyPress(this.id)">C</div>
                    <div class="key" id="v" onclick="SHRM.utils.onKeyPress(this.id)">V</div>
                    <div class="key" id="b" onclick="SHRM.utils.onKeyPress(this.id)">B</div>
                    <div class="key" id="n" onclick="SHRM.utils.onKeyPress(this.id)">N</div>
                    <div class="key" id="m" onclick="SHRM.utils.onKeyPress(this.id)">M</div>   
                </div>
                <div id="keyboardrow0">
                    <div class="keylong" id="Backspace" onclick="SHRM.utils.onKeyPress(this.id)">Delete</div>
                    <div class="keylong key_clue_disabled" id="Clue" onclick="SHRM.utils.onKeyPress(this.id)"><img class="img-responsive logo-small" src="https://d11p36kvaeudqt.cloudfront.net/logos/SHRM_Blocks_KO.svg" alt="SHRM Logo"> Clue</div>
                    <div class="keylong" id="Enter" onclick="SHRM.utils.onKeyPress(this.id)">Enter</div> 
                </div>
            </div>
        </div>
 
        <script>
            
            
            var SHRM = SHRM || {};
            SHRM.utils = {};
            SHRM.utils.data = {}
            
            var json_schedule = [
                {"id":"10.1","date":"03/07/2022","word":"star","clue":"Service Teamwork and Recognition","factoid":"","url":""}
                ,{"id":"10.2","date":"03/08/2022","word":"respect","clue":"With high regard","factoid":"","url":""}
                ,{"id":"10.3","date":"03/09/2022","word":"core values","clue":"U.S workers said this helped guide their organization through the pandemic.","factoid":"Workers are leaning on their workplace culture and trusting in organizational values, as 74% of working Americans believe their organizational values helped guide them through the pandemic.","url":"https://shrm.org/hr-today/trends-and-forecasting/research-and-surveys/Pages/2021-Workplace-Culture-Report.aspx?_ga=2.199475630.1465254891.1646658387-1459168090.1638458997&_gac=1.170664212.1643650642.EAIaIQobChMIoIiX4sPc9QIVzgaICR2QlA20EAAYASAAEgJZnPD_BwE"}
                ,{"id":"10.4","date":"03/10/2022","word":"left","clue":"U.S. workers said they did this at a job because of a negative relationship with a manager.","factoid":"53% of U.S. workers have left a job due to their relationship with their manager.","url":"https://shrm.org/hr-today/trends-and-forecasting/research-and-surveys/Pages/2021-Workplace-Culture-Report.aspx?_ga=2.199475630.1465254891.1646658387-1459168090.1638458997&_gac=1.170664212.1643650642.EAIaIQobChMIoIiX4sPc9QIVzgaICR2QlA20EAAYASAAEgJZnPD_BwE"}
                ,{"id":"10.5","date":"03/11/2022","word":"hours","clue":"A unit of time","factoid":"52% of people managers spend an average of 1 to 10 hours per week managing their workplace culture.","url":"https://shrm.org/hr-today/trends-and-forecasting/research-and-surveys/Pages/2021-Workplace-Culture-Report.aspx?_ga=2.199475630.1465254891.1646658387-1459168090.1638458997&_gac=1.170664212.1643650642.EAIaIQobChMIoIiX4sPc9QIVzgaICR2QlA20EAAYASAAEgJZnPD_BwE"}
                ,{"id":"11.1","date":"03/14/2022","word":"tired","clue":"Another word for exhausted","factoid":"54% of people managers report that they leave work feeling exhausted.","url":"https://shrm.org/hr-today/trends-and-forecasting/research-and-surveys/Pages/2021-Workplace-Culture-Report.aspx?_ga=2.199475630.1465254891.1646658387-1459168090.1638458997&_gac=1.170664212.1643650642.EAIaIQobChMIoIiX4sPc9QIVzgaICR2QlA20EAAYASAAEgJZnPD_BwE"}
                ,{"id":"11.2","date":"03/15/2022","word":"impact","clue":"Executives agree that they can make an ______ on workplace culture.","factoid":"97% of executives agree that their actions have a direct impact on workplace culture.","url":"https://shrm.org/hr-today/trends-and-forecasting/research-and-surveys/Pages/2021-Workplace-Culture-Report.aspx?_ga=2.199475630.1465254891.1646658387-1459168090.1638458997&_gac=1.170664212.1643650642.EAIaIQobChMIoIiX4sPc9QIVzgaICR2QlA20EAAYASAAEgJZnPD_BwE"}
                ,{"id":"11.3","date":"03/16/2022","word":"people","clue":"A company's most important resource","factoid":"","url":"http://shrm.org"}
                ,{"id":"11.4","date":"03/17/2022","word":"empathy","clue":"A clue could go here","factoid":"21% of those who quit their jobs in the past 9 months did so because their organization’s leadership lacked empathy toward employees","url":"http://shrm.org"}
                ,{"id":"11.5","date":"03/18/2022","word":"remote","clue":"A clue could go here","factoid":"40% of U.S. workers would prefer to work remotely in some capacity, either fully remote (23%) or mostly remote, but sometimes in-person (17%).","url":"http://shrm.org"}
                ,{"id":"12.1","date":"03/21/2022","word":"resign","clue":"A clue could go here","factoid":"Nearly half (49%) of U.S. workers are actively searching for a new job right now or plan to over the next few months.","url":"http://shrm.org"}
                ,{"id":"12.2","date":"03/22/2022","word":"balance","clue":"A clue could go here","factoid":"58% of U.S. workers believe a healthy work-life balance is more important than higher pay or salary.","url":"http://shrm.org"}
                ,{"id":"12.3","date":"03/23/2022","word":"romance","clue":"A clue could go here","factoid":"A third of U.S. workers (33%) report that they’re currently involved or have been involved in a workplace romance","url":"http://shrm.org"}
                ,{"id":"12.4","date":"03/24/2022","word":"disclose","clue":"A clue could go here","factoid":"77% of U.S. workers say that their employer does not require employees to disclose if they are involved in a workplace romance","url":"http://shrm.org"}
                ,{"id":"12.5","date":"03/25/2022","word":"equity","clue":"A clue could go here","factoid":"Only half (52%) of HR professionals believe that senior leaders in their organization are held accountable for ensuring male and female employees have equitable access to career paths or opportunities that lead to leadership roles.","url":"http://shrm.org"}
                ,{"id":"13.1","date":"03/28/2022","word":"manager","clue":"A clue could go here","factoid":"Female managers with caregiving responsibilities (35%) are more likely to have experienced a pandemic-related career setback than their male counterparts (26%).","url":"http://shrm.org"}
                ,{"id":"13.2","date":"03/29/2022","word":"culture","clue":"A clue could go here","factoid":"More than 9 out of 10 people managers (94%) agree a positive workplace culture creates a resilient team of employees.","url":"http://shrm.org"}
                
            ]

            if (json_schedule){
                if (!(SHRM.utils.data.schedule)){
                    SHRM.utils.data.schedule = json_schedule
                }
            }

            (function () {
                'use strict';
                
                this.getRemoteData = function (path_to_csv){
                    if (this.ajaxResults[path_to_csv]){
                        return this.ajaxResults[path_to_csv]
                    }else{
                        var ajax = $.get(path_to_csv,function(response){
                            //do nothing
                        });
                        console.log('Fetching new data: ' + path_to_csv)
                        this.ajaxResults[path_to_csv] = ajax
                        return ajax;
                    }
                };

                this.fillArray = function (num,element){
                    var ar2=[];
                    for (var i=0;i<num;i++){
                        ar2.push(element);
                    }
                    return ar2;
                };

                this.sumArray = function (ar){
                    // add all elements of array together returns one number
                    var ar3 = 0;
                    for(var i in ar){
                        ar3+=ar[i];
                    }
                    return ar3;
                };

                this.maxArray = function (ar){
                    var max = 0;
                    for(var i in ar)
                        if(ar[i]>max){
                            max=ar[i];
                        }
                    return max;
                };

                this.getPrevAvailableGameID = function (current_game_index){
                    var gameStats=JSON.parse(localStorage.gameStats)
                    
                    if (gameStats.played.includes(this.data.schedule[current_game_index].id) &&  current_game_index > 0){
                        return this.getPrevAvailableGameID(--current_game_index)
                    }else{
                        return current_game_index
                    }   
                };

                this.getWord = function (){
                    // Order of precendence:
                    // 1. Challenge code via URL params, then by
                    // 2. Today's date, then by
                    // 3. Most recent to least recent games NOT played
                    
                    var code = this.getURLparam('challenge')   //get value from URL parameters

                    if (typeof code == 'undefined'){
                        code = -1
                    }
                    
                    var filtered_by = null
                    SHRM.workle = null
                    filtered_by = SHRM.utils.data.schedule.filter(a => a.id == code)
                    if (filtered_by.length == 1){
                        // do nothing
                    }else{
                        if (SHRM.utils.playagain && SHRM.utils.playagain == true){
                            filtered_by = SHRM.utils.data.schedule.filter(a => a.date == new Date().toLocaleString("en-US", {year: 'numeric', month: '2-digit', day: '2-digit'}));
                            var available_game_index = this.getPrevAvailableGameID(this.data.schedule.findIndex(x => x.id === filtered_by[0].id))
                            if (available_game_index == 0){
                                filtered_by = SHRM.utils.data.schedule.filter(a => a.date == new Date().toLocaleString("en-US", {year: 'numeric', month: '2-digit', day: '2-digit'}));
                            }else{
                                filtered_by = SHRM.utils.data.schedule.filter(a => a.id == available_game_index)
                            }
                        }else{
                            
                            filtered_by = SHRM.utils.data.schedule.filter(a => a.date == new Date().toLocaleString("en-US", {year: 'numeric', month: '2-digit', day: '2-digit'}));
                        }

                        if (filtered_by.length == 1){
                            // do nothing
                        }else if (filtered_by.length > 1){
                            filtered_by = filtered_by[Math.floor(Math.random()*filtered_by.length)]
                        }else{
                            filtered_by = SHRM.utils.data.schedule[Math.floor(Math.random()*SHRM.utils.data.schedule.length)]
                        }
                    }

                    if (filtered_by instanceof Array){
                        //SHRM.workle = filtered_by[0]
                        SHRM.workle = JSON.parse(JSON.stringify(filtered_by[0]))
                    }else{
                        //SHRM.workle = filtered_by
                        SHRM.workle = JSON.parse(JSON.stringify(filtered_by))
                    }

                    //add clue text if present
                    if (SHRM.workle.clue == ''){
                        $('#clue_text').html('');
                    }else{
                        $('#clue_text').html(SHRM.workle.clue);
                        $('#Clue').addClass('key_clue_enabled')
                    }

                    //add factoid if present
                    if (SHRM.workle.factoid == ''){
                        $('.fact_text').html('');
                        $('.fact_percent').html('');
                        $('.fact_url').html('');
                        $('.fact_text').hide()
                        $('.fact_percent').hide()
                        $('.fact_url').hide()
                        $('.fact').hide()
                    }else{
                        var factoid_arr = SHRM.workle.factoid.split("|")
                        if (factoid_arr.length == 1){
                            $('.fact_text').html(factoid_arr[0]);
                        }else{
                            $('.fact_percent').html(factoid_arr[0]);
                            $('.fact_text').html(factoid_arr[1]);
                            $('.fact_percent').show()
                        }
                        $('.fact_text').show()
                        if (SHRM.workle.url != ''){
                            $('.fact_url').prop('href', SHRM.workle.url);
                            $('.fact_url').show()
                        }
                        $('.fact').show()
                    }

                    SHRM.workle.word_original = SHRM.workle.word
                    SHRM.workle.word = SHRM.workle.word.replace(' ', '').replace('-', '')
                    SHRM.workle.wordarr = SHRM.workle.word.toUpperCase().split("");

                    //add word(s) to wordlist
                    var wordlist = []
                    var arr = SHRM.workle.word_original.split(' ')
                    if (SHRM.workle.word_original.indexOf(' ') > -1){
                        arr = SHRM.workle.word_original.split(' ')
                    }
                    if (SHRM.workle.word_original.indexOf('-') > -1){
                        arr = SHRM.workle.word_original.split('-')
                    }
                    if (arr.length == 1){
                        wordlist = window["words" + SHRM.workle.word.length]
                        wordlist.push(SHRM.workle.word)
                    }else{
                        wordlist = window["words" + arr[0].length]
                        if (arr[0].length != arr[1].length) {
                            wordlist = wordlist.concat(window["words" + arr[1].length])
                        }
                        wordlist.push(arr[0])
                        wordlist.push(arr[1])
                    }
                    
                    SHRM.workle.wordlist = wordlist
                    return SHRM.workle.word
                };

                this.getURLparam = function (parameter){
                    var isInIframe = (parent !== window);
                    if (isInIframe){
                        var thisURL = document.referrer;
                    } else{
                        var thisURL = window.location.href;
                    }
                    
                    var parseUrl = new URL(thisURL);

                    var parameter_value=parseUrl.searchParams.get(parameter);
                    
                    if (parameter_value !== null){
                        console.log(parameter_value)
                        return parameter_value
                    }else{
                        return
                    }
                };

                this.show_results = function (){
                    $('#stats-tab-last-played').attr('data-toggle', 'tab');
                    $('#stats-tab-last-played').removeClass('disabled_tab');
                    $('#modal_stats').modal('show');
                    SHRM.utils.share()
                    $('#stats-tab-last-played').trigger('click')
                }

                this.startGame = function (startword){
                    this.won=false;
                    this.gamehistory=[];
                    this.gameover = false;
                    this.tries=6;
                    this.numtries = 0;
                    if (typeof this.playagain == 'undefined'){
                        this.playagain = false;
                    }
                    
                    //$('#stats-tab-last-played').addClass('disabled_tab');
                    $('#stats-tab-last-played').attr('data-toggle', '');
                    $('#stats-tab-last-played').addClass('disabled_tab');
                    $('#modal_stats').modal('hide');
                    
                    this.getWord()

                    console.log('WORKLE - ' + SHRM.workle.word)
                    
                    this.row=1;
                    this.tile=0;
                    this.guess="";

                    this.makeBoard(this.tries);
                    
                    $( ".icon_instructions" ).click(function(e) {
                        $('#modal_info').modal('show')
                    });

                    $( ".icon_home" ).click(function(e) {
                        $('#modal_info').modal('hide')
                        $('#modal_stats').modal('hide')
                    });

                    $( ".icon_stats" ).click(function() {
                        SHRM.utils.showStats('All');
                    });

                };

                this.onKeyPress = function (key){
                    var letter = '';
                    var resultsstring = '';

                    $("#modal_info").modal('hide')
                    $("#modal_stats").modal('hide')
                    $("#modal_notaword").modal('hide')
                    //$("#modal_clue").modal('hide')


                    if (!this.gameover){
                        if (event.key) {
                            $('#' + event.key).delay(1).queueAddClass('key_pressed')
                        }else{
                            $('#' + key).delay(1).queueAddClass('key_pressed')
                        }

                        // console.log(event.key);
                        if (this.isLetter(key)){
                            letter = key.toUpperCase();
                            if(this.tile < SHRM.workle.word.length){
                                this.tile++;
                                this.guess = this.guess + letter;
                                $("#r"+this.row+"l"+this.tile).html(letter.toUpperCase());
                            }  
                            // console.log(row,tile,letter)
                        } else if (key=="Clue"){   
                            if ($( "#Clue" ).hasClass( "key_clue_enabled" )){
                                $('#clue_ad').show()
                                $('#press_your_luck').hide()
                                $('#modal_clue').modal('show')
                                this.begin_countdown(2)
                            }
                            // console.log('Clue')
                        } else if (key=="Backspace"){
                            $("#r"+this.row+"l"+this.tile).html("&nbsp;");
                            this.guess = this.guess.slice(0,-1);
                            if(this.tile>0){
                                this.tile--;
                            }
                            // console.log('Backspace')
                        } else if (key=="Enter"){
                            // console.log('Enter')
                            
                            if (this.show_random_letter == true){
                                this.show_random_letter = false
                                var remaining_letters = SHRM.workle.word_original
                                for (var i = 0; i < $('.key.place').length; i++){
                                    remaining_letters = remaining_letters.replace($($('.key.place')[i]).attr('id'), '')
                                }
                                for (var i = 0; i < $('.key.correct').length; i++){
                                    remaining_letters = remaining_letters.replace($($('.key.correct')[i]).attr('id'), '')
                                }
                                var arr_remaining_letters = remaining_letters.split("")
                                
                                this.letter_help = arr_remaining_letters[Math.floor(Math.random()*arr_remaining_letters.length)]
                                $("#begin_clue").hide()
                                $("#end_clue").show()
                                $("#Clue").hide()
                            }
                            
                            if (this.guess.length==SHRM.workle.word.length){
                                if (this.isWord(this.guess)){
                                    this.won=this.checkGuess(this.guess);

                                    if (this.won){
                                        this.numtries=this.row;
                                    }
                                    if (this.row==this.tries){
                                        this.gameover=true;
                                    }
                                    this.row++;
                                    this.guess="";
                                    this.tile=0;
                                    for (var j=0;j<SHRM.workle.word.length;j++){
                                        $("#r"+(this.row)+"l"+(j+1)).toggleClass('upcoming');
                                    }
                                    if (this.gameover){
                                        if (!this.won){
                                            resultsstring = "The word is " + SHRM.workle.word_original.toUpperCase();
                                            $("#resultsstring").html(resultsstring);
                                        } else {
                                            if (this.numtries == 1){
                                                resultsstring = "You got it on the first guess!";
                                            }else{
                                                resultsstring = "You got it in " + this.numtries + " guesses.";
                                            }
                                            $("#resultsstring").html(resultsstring);
                                        } 
                                        
                                        this.updateStats();
                                        //$('#copy').hide()
                                        
                                        window.setTimeout(function (){ SHRM.utils.show_results()}, 1500)
                                    }else{
                                        if (this.row == this.tries){
                                            if (SHRM.workle.clue != ''){
                                                $('#Clue').addClass('key_clue_enabled')
                                            }
                                        }
                                    }
                                } else {
                                    this.notWord();
                                }
                            }
                        }                    
                        // console.log(tile)
                        if (event.key) {
                            $('#' + event.key).delay(250).queueRemoveClass('key_pressed')
                        }else{
                            $('#' + key).delay(250).queueRemoveClass('key_pressed')
                        }
                    } else {
                        // console.log("gameover")
                    }
                };

                this.begin_countdown = function (sec){
                    $('#countdown').html(sec)
                    
                    window.setTimeout(() => {
                        var countdown = sec
                        if (countdown > 0){
                            $('#countdown').html(countdown);
                            countdown--;
                            SHRM.utils.begin_countdown(countdown);
                        }else{
                            $('#clue_ad').hide()
                            var letters=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];
                            $('#random_letter').html(letters[Math.floor(Math.random()*letters.length)])
                            $("#begin_clue").show()
                            $("#end_clue").hide()
                            $('#press_your_luck').show()
                            this.show_random_letter = true
                            this.show_random_letters()
                        }
                    }, 1000)       
                }

                this.show_random_letters = function (letter){
                    //
                    
                    var letters=['A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];
                    
                    //if (this.show_random_letter){
                        //    $('#random_letter').html(letters[Math.floor(Math.random()*letters.length)]).queueFadeIn(250).queueFadeOut(250)
                        //    window.setTimeout(SHRM.utils.show_random_letters(), 500)
                        //}else{
                        //    $('#random_letter').html(this.letter_help).queueFadeIn(250)
                    //}
                    
                    window.setTimeout(() => {
                        
                        if (this.show_random_letter){
                            if($("#random_letter").is(":visible")){
                                $("#random_letter").queueFadeOut(150)
                            }else{
                                $('#random_letter').html(letters[Math.floor(Math.random()*letters.length)])
                                $("#random_letter").queueFadeIn(150)
                            }
                            SHRM.utils.show_random_letters();
                        }else{
                            $('#' + this.letter_help).addClass('key_clue')
                            $('#random_letter').html(this.letter_help.toUpperCase()).queueFadeIn(250)
                        }
                    }, 150)
                    
                }

                this.clearKeyboard = function (){
                    var letters=['a','b','c','d','e','f','g','h','i','j','k','l','m','n','o','p','q','r','s','t','u','v','w','x','y','z'];
                    for (var letter of letters){
                        $("#"+letter).removeClass("none place correct")
                    }
                    $('#Clue').addClass('key_clue_disabled')
                };

                this.notWord = function (){
                    $('#modal_notaword').modal('show')
                    setTimeout(function(a){$('#modal_notaword').modal('hide')},2000);
                };

                this.clearURLparams = function (){
                    var isInIframe = (parent !== window);
                    if (isInIframe){
                        var thisURL = document.referrer;
                    } else{
                        var thisURL = window.location.href;
                    }

                    var baseurl = thisURL.split("?")[0]
                        console.log(baseurl)
                    if (isInIframe){
                        window.parent.history.pushState("", "", baseurl);
                    } else {
                        history.pushState("", "", baseurl);
                    }        
                };

                this.isWord = function (guess){
                    var spacing_location = SHRM.workle.word_original.indexOf(' ')
                    if (spacing_location > -1){
                        var word1 = guess.substring(0,spacing_location)
                        var word2 = guess.substring(spacing_location)
                        return (SHRM.workle.wordlist.includes(word1.toLowerCase()) && SHRM.workle.wordlist.includes(word2.toLowerCase()));
                    }

                    var dash_location = SHRM.workle.word_original.indexOf('-')
                    if (dash_location > -1){
                        var word1 = guess.substring(0,dash_location)
                        var word2 = guess.substring(dash_location)
                        return (SHRM.workle.wordlist.includes(word1.toLowerCase()) && SHRM.workle.wordlist.includes(word2.toLowerCase()));
                    }

                    //return (scrabblewords.includes(guess.toLowerCase())|| SHRM.workle.wordlist.includes(guess.toLowerCase()));
                    return SHRM.workle.wordlist.includes(guess.toLowerCase());
                };

                this.makeBoard = function (tries){
                    var spacing_location = SHRM.workle.word_original.indexOf(' ')
                    var dash_location = SHRM.workle.word_original.indexOf('-')
                    
                    $( "#gamecontainer" ).empty();
                    for (var i=0;i < tries;i++){
                        $("#gamecontainer").append('<div class="row" id="row'+(i+1)+'"></div>');
                        
                        for (var j=0;j<SHRM.workle.word.length;j++){ 
                            if (spacing_location == j){
                                $("#row"+(i+1)).append('<div class="col letter letter_borderless" id="r'+(i+1)+'lspace'+'">&nbsp;</div>');
                            }
                            if (dash_location == j){
                                $("#row"+(i+1)).append('<div class="col letter letter_borderless" id="r'+(i+1)+'ldash'+'"><span class="letter_dash">-</span></div>');
                            }
                            $("#row"+(i+1)).append('<div class="col letter" id="r'+(i+1)+'l'+(j+1)+'">&nbsp;</div>');
                            if (i>0){
                                $("#r"+(i+1)+"l"+(j+1)).addClass('upcoming');
                            }  
                        }
                    }
                };
                
                this.initStats = function (){
                    var gameStats = {}
                    if (typeof localStorage.gameStats == 'undefined'){
                        gameStats={
                            winDist:[[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0],[0,0,0,0,0,0]],
                            games:[0,0,0,0,0,0],
                            losses:[0,0,0,0,0,0],
                            wins:[0,0,0,0,0,0],
                            streak:[0,0,0,0,0,0],
                            beststreak:[0,0,0,0,0,0],
                            winpct:[0,0,0,0,0,0],
                            played:[]
                        }
                        localStorage.gameStats=JSON.stringify(gameStats);
                    }
                    gameStats=JSON.parse(localStorage.gameStats);

                    $( ".numbertab" ).on( "click", function() {
                        // console.log(shownum);
                        SHRM.utils.showStats($( this ).text());
                    });
                };

                this.writeStats = function (numletters){
                    var numletters = String(numletters).replace('+','')
                    if (SHRM.workle.word.length > 8){
                        numletters = 8
                    }
                    var gameStats=JSON.parse(localStorage.gameStats);

                    $("#games").html(gameStats.games[numletters-3]);
                    $("#wins").html(gameStats.wins[numletters-3]);
                    $("#winpct").html(gameStats.winpct[numletters-3]+"%");
                    $("#streak").html(gameStats.streak[numletters-3]);
                    $("#beststreak").html(gameStats.beststreak[numletters-3]);

                    var minwidth=4;
                    var maxwidth=95;
                    
                    for (var i=0;i<6;i++){
                        var maxlength=this.maxArray(gameStats.winDist[numletters-3]);
                        if(maxlength==0){
                            maxlength=1;
                        }
                        var tmpwidth=gameStats.winDist[numletters-3][i]/maxlength*maxwidth+minwidth;
                        // console.log(tmpwidth);
                        $("#g_"+(i+1)).width(tmpwidth+"%");
                        $("#g_"+(i+1)).html(gameStats.winDist[numletters-3][i])
                    }
                    $(".guessbar").removeClass('hlguessbar');
                    
                    if (numletters==SHRM.workle.word.length||numletters==8){
                        try{
                            if (this.won){
                                $("#g_"+this.numtries).addClass('hlguessbar');
                            }
                        }catch(err){}
                    }
                };

                this.updateStats = function (){
                    var allindex=5;
                    if (true){
                        var wordLength = SHRM.workle.word.length
                        var gameStats=JSON.parse(localStorage.gameStats);
                        if (SHRM.workle.word_original.indexOf(' ') > -1 || SHRM.workle.word_original.indexOf('-') > -1){
                            wordLength = 7
                        }
                        gameStats.games[wordLength-3]++;
                        gameStats.games[allindex]++;
                        if (this.won){
                            gameStats.wins[wordLength-3]++;
                            gameStats.wins[allindex]++;
                            gameStats.streak[wordLength-3]++;
                            gameStats.streak[allindex]++;
                            if (gameStats.streak[wordLength-3]>gameStats.beststreak[wordLength-3]){
                                gameStats.beststreak[wordLength-3]=gameStats.streak[wordLength-3];
                            }
                            if (gameStats.streak[allindex]>gameStats.beststreak[allindex]){
                                gameStats.beststreak[allindex]=gameStats.streak[allindex];
                            }
                            gameStats.winDist[wordLength-3][this.numtries-1]++
                            gameStats.winDist[allindex][this.numtries-1]++
                        } else{
                            gameStats.losses[wordLength-3]++;
                            gameStats.losses[allindex]++;
                            gameStats.streak[wordLength-3]=0;
                            gameStats.streak[allindex]=0;
                        }
                        gameStats.winpct[wordLength-3]=Math.round(gameStats.wins[wordLength-3]/gameStats.games[wordLength-3]*100);
                        gameStats.winpct[allindex]=Math.round(gameStats.wins[allindex]/gameStats.games[allindex]*100);
                        if (!(gameStats.played instanceof Array)){
                            gameStats.played = []
                        }
                        gameStats.played.push(SHRM.workle.id)
                        localStorage.gameStats=JSON.stringify(gameStats);
                        console.log(gameStats);
                    }
                };

                this.showStats = function (num){
                    // console.log(num);
                    if (num=="All"){
                        this.writeStats(8);
                    } else {
                        this.writeStats(num);
                    }
                    
                    $('#stats-tab-overall').trigger('click');
                    $('#modal_stats').modal('show');
                    $(".numbertab").removeClass('highlight');
                    $("#s_"+num.replace('+','')).addClass('highlight');
                };
                
                this.playAgainButton = function (){
                    SHRM.workle = null
                    this.playagain = true
                    this.clearKeyboard();
                    this.clearURLparams()
                    this.startGame();
                };

                this.checkGuess = function (guess){
                    var guessarr = guess.split("");
                    var guessarr2 = guessarr.slice();
                    var wordarr2 = SHRM.workle.wordarr.slice();
                    var tmploc = -1;
                    var colorarr = this.fillArray(SHRM.workle.word.length,0);
                    var code = '';
                    
                    for (var i=0;i<guessarr.length;i++){
                        //check for correct letter placement first
                        if (guessarr[i]==SHRM.workle.wordarr[i]){
                            colorarr[i]=1;
                            guessarr2[i]='*';
                            wordarr2[i]='&';
                            //$("#"+guessarr[i].toLowerCase()).addClass('correct');
                            //$("#"+guessarr[i].toLowerCase()).queueFadeOut(i * 500).queueAddClass('correct').queueFadeIn(i * 350)
                            $("#"+guessarr[i].toLowerCase()).delay(3000).queueAddClass('correct')
                        } 
                    }

                    for (var i=0;i<guessarr.length;i++){
                        if (colorarr[i]==1){

                        } else if (wordarr2.includes(guessarr2[i])){
                            colorarr[i]=-1;
                            tmploc=wordarr2.indexOf(guessarr2[i]);
                            guessarr2[i]='*'; 
                            wordarr2[tmploc]='&';
                            //$("#"+guessarr[i].toLowerCase()).addClass('place');
                            $("#"+guessarr[i].toLowerCase()).delay(3000).queueAddClass('place')
                        } else {
                            //$("#"+guessarr[i].toLowerCase()).addClass('none');
                            if (SHRM.workle.word.toLowerCase().includes(guessarr[i].toLowerCase())){
                                console.log(guessarr[i].toLowerCase())
                            }else{
                                $("#"+guessarr[i].toLowerCase()).delay(3000).queueAddClass('none')
                            }
                        }
                        // console.log(guessarr2,wordarr2)
                    }
                    
                    for (var i=0;i<guessarr.length;i++){
                        //$("#r"+this.row+"l"+(i+1)).removeClass("none place correct")

                        $("#r"+this.row+"l"+(i+1)).html(guess[i].toUpperCase());
                        if (colorarr[i]==0){
                            code="none"
                        } else if (colorarr[i]==-1){
                            code="place"
                        } else {
                            code="correct"
                        }
                        //$("#r"+this.row+"l"+(i+1)).addClass(code)

                        $("#r"+this.row+"l"+(i+1)).queueFadeOut(i * 300).queueRemoveClass("none place correct").queueAddClass(code).queueFadeIn(i * 250)
                                                
                    }
                    
                    // console.log(colorarr);
                    this.gamehistory.push(colorarr);
                    if (this.sumArray(colorarr)==SHRM.workle.word.length){
                        this.gameover=true;
                        
                        return true
                    } else{
                        return false
                    }
                };

                $.fn.queueAddClass = function (className){
                    this.queue('fx', function(next) {
                        $(this).addClass(className);
                        next();
                    });
                    return this;
                }

                $.fn.queueRemoveClass = function (className){
                    this.queue('fx', function(next) {
                        $(this).removeClass(className);
                        next();
                    });
                    return this;
                }

                $.fn.queueFadeIn = function (ms){
                    this.queue('fx', function(next) {
                        $(this).fadeIn(ms);
                        next();
                    });
                    return this;
                }

                $.fn.queueFadeOut = function (ms){
                    this.queue('fx', function(next) {
                        $(this).fadeOut(ms);
                        next();
                    });
                    return this;
                }
                
                this.isLetter = function (guess){
                    return /^[A-Z]$/i.test(guess);
                };
                
                this.share = function (){
                    //custom = false
                    var newline_char = '\n'
                    //var newline_char = '<br>'
                    //var sharestring=`Try SHRM's WORKWORDS Challenge (${SHRM.workle.word.length} letters)\n${(this.won?"I did it in "+this.numtries+" out of 6 tries.":"I failed :(")}\n`
                    //var sharestring=`Try SHRM's WORKWORDS Challenge #${SHRM.workle.id} (${SHRM.workle.word.length} letters)${newline_char}${(this.won?"I did it in "+this.numtries+" out of 6 tries.":"I failed :(")}${newline_char}`
                    
                    var sharestring = "SHRM's WORKWORDS Challenge #" + SHRM.workle.id + " (" + SHRM.workle.word.length + " letters)"
                    if (this.won) {
                        sharestring += newline_char + "I did it in " + this.numtries + " out of 6 tries." + newline_char + newline_char
                    }else{
                        sharestring += newline_char + "I was stumped." + newline_char + newline_char
                    }

                    for (var i=0;i<this.gamehistory.length;i++){
                        sharestring+=''

                        for (var j=0;j<SHRM.workle.word.length;j++){
                            sharestring+=this.getEmoji(this.gamehistory[i][j])
                        }
                        if (i < this.gamehistory.length-1){
                            sharestring+=newline_char
                        }
                    }
                    sharestring+= newline_char + newline_char + 'Try the same exact puzzle here:' + newline_char
                    

                    /*
                    var sharestring=`Try SHRM's WORKWORDS Challenge (${SHRM.workle.word.length} letters)\n${(this.won?"I did it in "+this.numtries+" out of 6 tries.":"I failed :(")}\n\n`
                    for (var i=0;i < this.gamehistory.length; i++){
                        sharestring+=''

                        for (var j=0;j<SHRM.workle.word.length;j++){
                            sharestring += this.getEmoji(this.gamehistory[i][j])
                        }
                        if (i < this.gamehistory.length-1){
                            sharestring+='\n'
                        }
                    }
                    sharestring+='\n\nTry the same exact puzzle here:'
                    */
                    
                    var isInIframe = (parent !== window);
                    if (isInIframe){
                        var thisURL = document.referrer;
                    } else{
                        var thisURL = window.location.href;
                    }

                    var baseurl = thisURL.split("?")[0]

                    var urlstring=thisURL + '?challenge=' + SHRM.workle.id;

                    console.log(urlstring);
                    sharestring+=urlstring;
                    console.log("copying "+sharestring)
                    $("#sharearea").show();
                    if (newline_char == '<br>'){
                        $("#sharearea").html(sharestring);
                    }else{
                        $("#sharearea").text(sharestring);
                    }
                    
                    $('#sharearea').focus();
                    $('#sharearea').select();
                    navigator.clipboard.writeText($('#sharearea').text());
                };

                this.copyResults = function() {
                    if (document.selection) { // IE
                        var range = document.body.createTextRange();
                        range.moveToElementText(document.getElementById('sharearea'));
                        range.select();
                    } else if (window.getSelection) {
                        var range = document.createRange();
                        range.selectNode(document.getElementById('sharearea'));
                        window.getSelection().removeAllRanges();
                        window.getSelection().addRange(range);
                    }
                    
                    //document.execCommand("copy");
                    $('#sharearea').focus();
                    $('#sharearea').select();
                    navigator.clipboard.writeText($('#sharearea').text());
                    
                }

                this.getEmoji = function (guess){
                    var gbox='&#128998;'
                    var obox="&#128999;"
                    var bbox="&#11035;"
                    gbox='🟦'
                    obox="🟧"
                    bbox="⬛"

                    if (guess==1){
                        return gbox
                    } else if (guess==-1){
                        return obox
                    } else {
                        return bbox
                    }
                };

                this.sleep = function(ms){
                    return new Promise(resolve => setTimeout(resolve, ms));
                };
        
            }).apply(SHRM.utils);

            //SHRM.utils.sleep(2000).then(() => { showSpinner(false); });
            
            $(this).on('keydown', function(event) {
                $('#' + event.key).trigger('click')
                //SHRM.utils.onKeyPress(event.key)
            });

            $(this).on('show.bs.tab', function(event) {
                var tab = $(event.target).prop('id')

                if (tab == 'stats-tab-overall'){
                    
                }else{
                    if ($('#sharearea').text() == ''){
                        return false
                    }
                }
            });

            $(this).on('shown.bs.tab', function(event) {
                var tab = $(event.target).prop('id')

                if (tab == 'stats-tab-overall'){
                    SHRM.utils.showStats('All');
                }
            });

            $(document).ready(function(){
                SHRM.utils.initStats();
                SHRM.utils.startGame();
                //$('#modal_info').modal('show')
            });
        </script>
    </body>
</html>